{% extends 'base.html' %}
{% load static %}

{% block content %}  
    <div class="container">
        <h1 class="display-4 text-primary">{{title}}</h1>
        <br>
        <table class="table">
            <tr><th>担当者</th><td>{{ task.owner.username }}</td></tr>
            <tr><th>業務名</th><td>{{ task.title }}</td></tr>
            <tr><th>業務内容</th><td>{{ task.work }}</td></tr>
            <tr><th>外部/内部</th><td>{{ task.boundary }}</td></tr>
            <tr><th>種類</th><td>{{ task.category }}</td></tr>
            <tr><th>受付日</th><td>{{ task.reception_date|date:"Y年m月d日" }}</td></tr>
            <tr><th>処理期日</th><td>{{ task.due_date|date:"Y年m月d日" }}</td></tr>
            <tr><th>進捗</th><td>{{ task.work_progress }}</td></tr>
            <tr><th>完了日</th><td>{{ task.completion_date }}</td></tr>
            <tr><th>備考</th><td>{{ task.option }}</td></tr>
        
            <tr><th></th><td>
                <a href="{% url 'edit_task' task.id %}" class="btn btn-warning">編集</a>
                <!-- タスク削除ボタンを含める -->
                {% include 'task_app/delete_task.html' %}
            </td></tr>
        </table>
        <a href="{% url 'task_list' %}" class="btn btn-secondary">一覧へ戻る</a>
    </div>


    <!-- コメント一覧 -->
    <dev class="container mt-4">
        <h2>コメント一覧</h2>
        {% for comment in comments %}
        <div class="center-block">
                <p><strong>{{ comment.owner_user.username }}</strong>（{{ comment.pub_date|date:"Y年m月d日 H:i" }}）</p>
                <p>{{ comment.comment }}</p>
        </div>
        {% empty %}
            <p>コメントはまだありません。</p>
        {% endfor %}
    </div>

    <!-- コメント送信 -->
    <div>
        <form method="post">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit" class="btn btn=primary">コメントを送信</button>
        </fotm>
    </div>

    {% endblock %}